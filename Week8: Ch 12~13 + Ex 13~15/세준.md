# 12장 타입스트립트 프로젝트 관리

## 앰비언트 타입

앰비언트 타입은 타입스크립트에서 이미 존재하는 자바스크립트 코드의 타입 정보를 선언하는 방법이다.

### 앰비언트 타입 선언 방식

- `.d.ts` 확장자를 가진 파일에서 타입을 선언한다.
- `declare` 키워드를 사용하여 어딘가에 자바스크립트 값이 존재한다는 사실을 선언할 수 있다.
- 앰비언트 타입 선언은 런타임에 영향을 주지 않는다.

### 앰비언트 타입 선언 예시

```tsx
// 전역 변수 선언
declare const process: {
  env: {
    NODE_ENV: 'development' | 'production';
  };
};

// 외부 라이브러리 타입 정의
declare module 'external-library' {
  export function someFunction(): void;
  export const someValue: string;
}

// 기존 모듈 확장
declare global {
  interface String {
    toCapitalized(): string;
  }
}
```

### 임포트 없이 타입을 전역으로 공유

- `.d.ts` 파일에서의 앰비언트 타입 선언은 전역 변수와 같은 역할 을한다.
- 모든 코드 내에서 임포트 없이 사용할 수 있다.

```tsx
// src/index.d.ts
type Optional<T extends object, K extends keyof T = keyof T> = Omit<T, K> &
  Partial<Pick<T, K>>;

// src/components.ts
type Props = { name: string; age: number; visible: boolean };
type OptionalProps = Optional<Props>; // 임포트 없이 사용 가능
```

### declare global

- `declare globa`l 키워드는 전역 변수를 선언할 때 사용한다.
- `window` 객체의 스코프에서 사용되는 모듈이나 변수를 추가할 수 있다.

```tsx
declare global {
  interface Window {
    newProperty: string;
  }
}
```

## 스크립트와 설정 파일 활용하기

### 1. 스크립트 활용

- 에디터에서는 문제가 없느나 커밋 혹은 husky에서 타입 에러가 발견되는 경우 등
- 스크립트를 사용하여 실시간으로 에러를 확인할 수 있다.

```tsx
yarn tsc --noEmit --incremental -w

// noEmit : 자바스크립트로 된 출력 파일을 생성하지 않도록 설정
// incremental : 증분 컴파일을 활성화하여 컴파일 시간 단축
// w : 파일 변경 사항을 모니터링
```

> **증분 컴파일**

매번 모든 대상을 컴파일하는 것이 아니라 변경 사항이 있는 부분만을 컴파일

타입 커버리지를 확인할 수도 있다.

```tsx
npx type-coverage --detail
```

### 2. 설정 파일 활용

`tsconfig`의 `incremetal` 속성을 통해 컴파일 속도 높일 수 있다.

<br/>

# 13장 타입스크립트 객체 지향

## 객체 지향 관점에서 타입스크립트 이점

- 타입스크립트는 props를 인터페이스로 정의할 수 있다.
- 객체 지향 패러다임에서는 객체 간의 협력 관계에 초점을 둔다. 컴포넌트 간의 협력 관계를 표현하는 것이 prop이다.
- 객체 자체가 아니라 프레임워크에 의해 객체의 의존성이 주입되는 DI 패턴을 따르는데 이 패턴을 더욱 명확하게 표현할 수 있게 해준다.
- 점진적 타이핑, 구조적 타이핑, 덕 타이핑을 결합한 언어로 객체 지향의 폭을 넓혀준다.

## 우형 예시

- 레이아웃만을 담당하는 컴포넌트 영역
- 컴포넌트 영역 위에서 레이아웃과 비지니스 로직을 연결해주는 커스텀 훅 영역
- 훅 영역 위에서 객체로서 상호 협력하는 모델 영역
- 모델 영역 위에서 API를 해석하여 모델로 전달하는 API 레이어 영역

### 1. 컴포넌트 영역

이 영역에서는 레이아웃을 담당하는 뷰 영역과 비지니스 로직을 불러와 연결시켜주는 역할을 한다.

```tsx
const ExampleDialog = () => {
	const cartStore = useCartStore();

	// View
	return <PresentationComponent>
		...
	</PresentationComponent/>
}
```

### 2. 커스텀 훅 영역

비지니스 로직을 레이아웃과 연결해주기 위한 커스텀 훅 영역이다.

여기서는 API를 호출하며 데이터를 가공해주는 함수를 통해 view에 친화적으로 변경 후 반환하는 역할을 한다.

```tsx
class CartStore {
	...api를 호출하는 함수를 통해 데이터를 불러오고 view에 맞게 가공하는 함수를 호출하여 리턴

}

const [CartStoreProvider, useCartStore] = setupContext<CartStore>("CartStore");
export { CartStore, CartStoreProvider, useCartStore };
```

### 3. 모델 영역

어댑터 패턴과 같이 데이터를 가공하는 역할과 api의 리턴 타입을 정의한다.

### 4. API 레이어 영역

api 쏘는 로직을 추상화

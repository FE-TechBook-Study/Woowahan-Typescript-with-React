# 상현

## 12장. 타입스크립트 프로젝트 관리

### 12.1 엠비언트(Ambient) 타입

.d.ts 확장자를 가진 파일은 **타입 선언만** 할 수 있으며 일반적인 선언과 구별하기 위해 해당 확장자에서 선언을 앰비언트(Ambient) 타입 선언

**앱비언트의 활용 사례**

- 자바스크립트로 작성된 라이브러리: node_modules/@types 안에 있는 타입선언을 불러와서 타입 환경 설정
- 타입스크립트로 작성된 라이브러리: 일반적으로 자바스크립트 파일과 .d.ts 파일로 배포. 라이브러리 사용자 다시 컴파일하는 시간을 줄이기 위해서.

**주의점**

- tsconfig에서 `declaration : true`이면 굳이 작성할 필요 없음
- 동일한 이름의 앰비언트 타입끼리 충돌이 발생할 수 있음
- 한번 선언이 되면 프로젝트 어디에서든 전부 사용 가능
  - src/index.tsx에서 declare로 타입 선언 시, src/test.tsx에서 사용 가능

**활용하기**

- 타입을 정의하여 임포트 없이 전역으로 공유
- delcare type 활용. 보편적으로 많이 사용하며 전역에서 사용 가능
  ```tsx
  delcare type Nullable<T> = T | null;
  const name: Nullable<string> = "wowowowo"
  ```
- declare module 활용
  ```tsx
  const fontSizes = {
  	xl: "30px",
  	// ...
  }
  const theme = {
  	fontSizes,
  	// ..
  }

  delcare module "styled-components" {
  	type Theme = typeof theme;

  	export interface DefaultTheme extends Theme {}
  }
  ```
- delcare namespace 활용하기
  ```tsx
  // .env
  API_URL = "localhost:8000";

  declare namespace NodeJS {
    interface ProcessEnv {
      readonly API_URL: string;
    }
  }
  ```
- declare global 활용하기: 전역변수를 선언할 때 사용
  ```tsx
  declare global {
    interface Window {
      newProperty: string;
    }
  }
  ```

### 12.2 스크립트 설정 파일 활용하기

- 실시간 타입 검사: `tsc -noEmit -incremental -w`
- 타입 커버리지 활용: any타입의 위치 파악
- 컴파일 속도 높이기:`incremental` flag
- Restart TS server

### 12.3 타입스크립트 마이그레이션

- allowJs, noImplicitAny 등등 활용

### 12.4 모노레포

분산된 프로젝트에서 공통된 부분을 독립시켜서 재사용할 수 있다면 좋지만 그만큼 공통된 부분을 수정할 때 모든 프로젝트에서 전부 확인 필요

공통된 부분을 공통 모듈로 관리: npm으로 배포하여 프로젝트에 넣을 수 있지만 별도의 레포를 설정하고 Lint, 테스트, CI/CD 작성 필요.

모노레포를 통하여 공통된 모듈을 서로 공유하고, Lint 및 CI/CD 등 개발환경을 통합적으로 관리하기에 코드 중복 지향. 그러나, 프로젝트가 커질 수록 소유권과 권한 관리가 복잡해질 수 있기에 명확한 규정이 필요

## 13장. 타입스크립트와 객체 지향

타입스크립트는 점진적 타이핑, 구조적 타이핑, 덕 타이핑 결합

- 점진적 타이핑은 명시한 부분만 정적 타입 검사를 하고 나머지 부분은 동적 타입 검사
- 덕 타이핑은 객체의 변수와 메서드 집합이 객체의 타입을 결정
- 구조적 타이핑은 객체 속성에 해당하는 특정 타입의 속성을 갖는지를 검사하여 타입 호환성 결정

프론트에서 과연 적합할까? 어렵다

- 객체지향은 서로의 연관성을 먼저 파악하고 작성을 하지만 프론트 영역에서는 이 사항을 먼저 알아차리기 어렵다.

### 13.2 우아한형제들의 활용 방식

설계 방식

- 온전히 레이아웃만 담당하는 “컴포넌트 영역”
- 컴포넌트 영역 위에서 레이아웃과 비즈니스 로직을 연결해주는 “커스텀 훅 영역”
- 훅 영역 위에서 객체로소 상호 협력하는 “모델 영역”
- 모델 영역 위에서 API를 해석하여 모델로 전달하는 “API 레이어 영역”

### 13.3 캡슐화와 추상화

- 객체들이 좀 더 사람이 인지할 수 있도록 적합한(Cart, Product, Seller) 설계를 하는 것이 곧 “추상화”
- 프론트 관점에서 캡슐화란 내부 데이터인 상태와 props를 잘 다루는 것
  - props drilling이 심할 수록 캡슐화 저해. 적절하게 사용 필요
